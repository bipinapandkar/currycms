(function(){var g=tinymce.DOM;tinymce.create("tinymce.plugins.CurryPopups",{init:function(a){a.onBeforeRenderUI.add(function(){a.windowManager=new tinymce.InlineWindowManager(a)})},getInfo:function(){return{longname:"CurryCMS Inline Popups",author:"Jesper Ek",authorurl:"http://currycms.com",infourl:"http://currycms.com",version:"0.1b"}}});tinymce.create("tinymce.InlineWindowManager:tinymce.WindowManager",{InlineWindowManager:function(a){this.parent(a);this.windows={}},open:function(a,b){a=a||{};b=
b||{};if(!a.inline)return c.parent(a,b);var c=this,d=g.uniqueId(),e={title:a.title||"",width:"auto",height:"auto"},f=$("<div />").attr("id","dialog-"+d),h={id:d,features:a,element:f};a.type||(this.bookmark=this.editor.selection.getBookmark(1));if(a.content)"confirm"==a.type?e.buttons=[{text:"Ok",click:function(){a.button_func(!0)}},{text:"Cancel",click:function(){a.button_func(!1)}}]:"alert"==a.type&&(e.buttons=[{text:"Ok",click:function(){a.button_func(!0)}}]),f.html($("<div />",{"class":"dialog-tinymce-content",
html:a.content}));else var j=$("<iframe />",{id:d+"_ifr",frameborder:0}).css({width:a.width,height:a.height+5}).attr("scrollbars","no").appendTo(f);b.mce_inline=!0;b.mce_window_id=d;b.mce_auto_focus=a.auto_focus;this.features=a;this.params=b;this.onOpen.dispatch(this,a,b);h.dialog=$.util.openDialog(null,"",f,e);a.content||j.attr("src",a.url||a.file);return c.windows[d]=h},resizeBy:function(){},focus:function(){},close:function(a,b){var c;b=b||a.frameElement.id.replace(/_ifr$/,"");if(this.windows[b]){if(c=
this.windows[b])c.dialog.trigger("dialogclose"),delete this.windows[b]}else this.parent(a)},setTitle:function(){},alert:function(a,b,c){this._messagePopup("alert","Alert",a,b,c)},confirm:function(a,b,c){this._messagePopup("confirm","Confirm",a,b,c)},_messagePopup:function(a,b,c,d){var e=this,f;f=e.open({title:b,type:a,button_func:function(a){d&&d.call(a||e,a);e.close(null,f.id)},content:g.encode(e.editor.getLang(c,c)),inline:1,width:400,height:130})}});tinymce.PluginManager.add("currypopups",tinymce.plugins.CurryPopups)})();